# APIトークンの取得方法ガイド

## APIトークンとは？
APIトークンは、アプリケーションが特定のサービス（この場合はINIADのAIサービス）を使用するための「許可証」のようなものです。

簡単に例えると：
- 図書館カードのようなもの
- 会員証のようなもの
- 鍵のようなもの

このトークンがないと、アプリケーションはAIサービスを利用できません。

## なぜ新しいトークンが必要なのか？
現在のトークンが「Invalid token（無効なトークン）」というエラーを出しています。これは以下の状況に似ています：
- 図書館カードの有効期限が切れた
- 会員証が失効している
- 鍵が使えなくなった

## 新しいトークンの取得方法

### 1. INIADダッシュボードへのアクセス
1. ブラウザで https://api.openai.iniad.org/ にアクセス
2. INIADアカウントでログイン

### 2. トークンの生成
1. ダッシュボード画面の「APIキーの生成」や「Create New Token」などのボタンを探す
2. ボタンをクリックして新しいトークンを生成
3. 生成されたトークンをコピー（必ず`sk-proj-`で始まるものを使用）

### 3. トークンの保存
1. `.env`ファイルを開く
2. 以下の2行を更新：
   ```
   OPENAI_API_KEY=新しいトークンを貼り付け
   VITE_OPENAI_API_KEY=${OPENAI_API_KEY}
   ```
   - 1行目：バックエンド（サーバー）用の設定
   - 2行目：フロントエンド用の設定（自動的に1行目の値を使用）
3. ファイルを保存

## 重要な注意点
- トークンは秘密情報です（パスワードのように扱ってください）
- トークンは一度しか表示されません（生成時に必ずコピーしてください）
- トークンは`sk-proj-`で始まる文字列です
- 両方の環境変数（`OPENAI_API_KEY`と`VITE_OPENAI_API_KEY`）が必要です

## トークン更新後の確認方法
1. アプリケーションを再起動
   - バックエンドサーバー（`npm run server`）
   - フロントエンド（`npm run dev`）
2. テストメッセージを送信
3. AIからの応答があれば成功です

## 困ったときは
- INIADのサポートに連絡
- システム管理者に相談
- エラーメッセージをスクリーンショットで保存 